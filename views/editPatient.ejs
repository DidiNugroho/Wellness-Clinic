<%- include('partials/Header') %>  
<title>Edit Patient</title>  
</head>  
<body>  
    <%- include('partials/navbar') %>  
    <div class="container mt-5">  
        <h1 class="mb-4 text-center">Edit Patient</h1>  
        
        <form action="/patients/<%= patient.id %>/edit" method="post">  
            <div class="form-group">  
                <label for="name">Patient Name</label>  
                <input type="text" class="form-control" id="name" name="name" value="<%= patient.Profile.name %>" readonly>  
            </div>  
            
            <div class="form-group">  
                <label for="illness">Assign Illness</label>  
                <select id="illness" name="illnessId" class="form-control">  
                    <% illnesses.forEach(illness => { %>  
                        <option value="<%= illness.id %>"   
                            <%= patient.Illnesses && patient.Illnesses.some(userIllness => userIllness.id === illness.id) ? 'selected' : '' %>>  
                            <%= illness.name %> - <%= illness.Category.name %>  
                        </option>  
                    <% }) %>  
                </select>  
            </div>  
            
            <button type="submit" class="btn btn-primary">Save</button>  
            <a href="/patients" class="btn btn-secondary">Cancel</a>  
        </form>  
    </div>  

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>  
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd/popper.min.js"></script>  
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>  
</body>  
</html>